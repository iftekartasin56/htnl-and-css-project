<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Investment Calculator</title>
</head>
<body>

<div id="wrapper">
    <style>
        #wrapper {
            width:1080px;
            margin:0 auto;
        }
        .ms--cal {
            font-family: Arial,Helvetica,sans-serif !important;
        }
        .ms--cal * {
            margin:0;
            padding: 0;
        }
        .ms--cal h1, .ms--cal h2, .ms--cal h3, .ms--cal h4 {
            margin-bottom: 1rem;
        }
        .ms--row {
            display: flex;
            flex-wrap: wrap;
            margin-top: 0;
        }
        .ms--input-sec label {
            display: block;
            margin-bottom: 10px;
            font-size: 18px;
            font-weight: 600;
        }
        .ms--input-group {
            position: relative;
        }
        .ms--form-control {
            display: block;
            width: 100%;
            padding: .375rem .75rem .375rem 1.7rem;
            font-size: 1.5rem;
            font-weight: 400;
            line-height: 1.5;
            color: #212529;
            background-color: #fff;
            background-clip: padding-box;
            border: none;
            border-bottom: 5px solid #ced4da;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            box-sizing: border-box;
            transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
        }
        .ms--form-control:hover {
            border-bottom: 5px solid #2A85AF;
        }
        .ms--form-control:focus {
            outline: none !important;
            border-bottom: 5px solid #2A85AF;
        }
        .ms--input-append {
            font-size: 1.5rem;
            font-weight: 400;
            line-height: 1.5;
            position: absolute;
            top: 39px;
            color: #4f4f4f;
        }
        .ms--cal-result {
            background: #000;
            color: #fff;
            padding: 2rem;
        }
        .ms--result-title {
            background: #2A85AF;
            padding: 10px;
        }
        .ms--cal-result h2 {
            font-size: 17px;
        }
        .ms--cal-result .ms--cal-value {
            color:#E3AC16;
            font-size: 40px;
        }
        .ms--bdr {
            width: 100%;
            height: 1px;
            background: #6f6f6f;
            margin-bottom: 20px;;
        }
        .ms--col-md-6 {
            flex: 0 0 auto;
            width: 50%;
            box-sizing: border-box;
            padding: 8px;
        }
        .ms--col-md-12 {
            flex: 0 0 auto;
            width: 100%;
            box-sizing: border-box;
            padding: 8px;
        }
        .ms--mb-3 {
            margin-bottom: 1.5rem;
        }
        .ms--text-center {
            text-align: center;
        }
        @media (max-width: 768px){
            .ms--col-md-6 {
                width: 100%;
            }
            #wrapper {
                width:100%;
                margin:0 auto;
            }
            .ms--cal-result .ms--cal-value{
                text-align: center;
            }
            .ms--cal-result h2{
                text-align: center;
            }
        }
    </style>
    <div class="ms--cal">
        <div class="ms--row ms--input-sec">
            <div class="ms--col-md-6">
                <div class="ms--input-group ms--mb-3">
                    <label class="ms--form-label">Your Age</label>
                    <input type="text" class="ms--form-control cl-in" >
                </div>
                <div class="ms--input-group ms--mb-3">
                    <label class="ms--form-label">Retirement Age</label>
                    <input type="text" class="ms--form-control cl-in" >
                </div>
                <div class="ms--input-group ms--mb-3">
                    <label class="ms--form-label">Starting Investment</label>
                    <input type="text" class="ms--form-control cl-in" >
                    <span class="ms--input-append">$</span>
                </div>
            </div>
            <div class="ms--col-md-6">
                <div class="ms--input-group ms--mb-3">
                    <label class="ms--form-label">Monthly Investment</label>
                    <input type="text" class="ms--form-control cl-in" >
                    <span class="ms--input-append">$</span>
                </div>
                <div class="ms--input-group ms--mb-3">
                    <label class="ms--form-label">Rate of Return</label>
                    <input type="text" class="ms--form-control cl-prcnt" >
                    <span class="ms--input-append">%</span>
                </div>
                <div class="ms--input-group ms--mb-3">
                    <label class="ms--form-label">Retirement Annual Cost of Living</label>
                    <input type="text" class="ms--form-control cl-in" >
                    <span class="ms--input-append">$</span>
                </div>
            </div>
            <div class="ms--col-md-12">
                <div class="ms--cal-result">
                    <h1 class="ms--text-center">Results</h1>
                    <div class="ms--bdr"></div>
                    <div class="ms--row">
                        <div class="ms--col-md-6">
                            <h1 class="ms--cal-value" id="cal_rs_1">0</h1>
                            <h2>Years Until Retirement</h2>
                            <div class="ms--bdr"></div>
                            <h1 class="ms--cal-value" id="cal_rs_2">$0.00</h1>
                            <h2>Investment Account At Retirement</h2>
                            <div class="ms--bdr"></div>
                        </div>
                        <div class="ms--col-md-6">
                            <h1 class="ms--cal-value" id="cal_rs_3">$0.00</h1>
                            <h2>Total Contribution Amount</h2>
                            <div class="ms--bdr"></div>
                            <h1 class="ms--cal-value" id="cal_rs_4">0</h1>
                            <h2>Years After Retirement to Live Off of Contributions</h2>
                            <div class="ms--bdr"></div>
                        </div>
                        <div class="ms--col-md-12 ms--text-center">
                            <br>
                            <h1 class="ms--cal-value" id="cal_rs_5">$0.00</h1>
                            <h2>Minimum Remaining After Contributions</h2>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/autonumeric@4.5.4"></script>
    <script>
        jQuery(document).ready(function ($) {
            let cal_inputs, cal_rs;
            let start_age, end_age;
            let cal_x, cal_y, cal_z, i;

            const numOptionCurrency = {
                digitGroupSeparator        : ',',
                decimalCharacter           : '.',
                decimalCharacterAlternative: '.',
                currencySymbol             : '',
                currencySymbolPlacement    : AutoNumeric.options.currencySymbolPlacement.prefix,
                decimalPlaces              : 0,
                minimumValue               : 0
            };
            const numOptionPercent = {
                digitGroupSeparator        : ',',
                decimalCharacter           : '.',
                decimalCharacterAlternative: '.',
                currencySymbol             : '',
                currencySymbolPlacement    : AutoNumeric.options.currencySymbolPlacement.suffix,
                decimalPlaces              : 0,
                minimumValue               : 0,
                maximumValue               : 100
            };

            const anElement1 = AutoNumeric.multiple('.cl-in', numOptionCurrency);
            const anElement2 = AutoNumeric.multiple('.cl-prcnt', numOptionPercent);

            function removeComma(num){
                return Number(num.replace(/,/g,""));
            }

            nftd = Intl.NumberFormat('en-US', {
                minimumFractionDigits:2,
                maximumFractionDigits:2
            });

            $('.ms--form-control').on('keyup change', function () {
                cal_inputs = [];
                $('.ms--form-control').each(function () {
                    let vl = removeComma($(this).val());
                    cal_inputs.push(vl);
                });
                calculate_rs(cal_inputs);
            });

            function calculate_rs(cal_inputs) {
                cal_rs = [];
                start_age = cal_inputs[0] + 1;
                end_age = cal_inputs[1] + 1;

                cal_x = cal_inputs[1] - cal_inputs[0];
                cal_rs.push(f_value(cal_x));

                for(i=start_age; i<end_age; i++){
                    if(i === start_age){
                        cal_x = cal_inputs[2] + (cal_inputs[3] * 12);
                        cal_y = cal_x * (1+(cal_inputs[4]/100));
                    } else {
                        cal_x = cal_y + (cal_inputs[3] * 12);
                        cal_y = cal_x * (1+(cal_inputs[4]/100));
                    }
                    console.log(i);
                }
                console.log(end_age);

                cal_rs.push(f_value(cal_y));
                cal_x = (cal_inputs[3]*12*cal_rs[0]) + cal_inputs[2];
                cal_rs.push(f_value(cal_x));
                cal_x = cal_x / cal_inputs[5];
                cal_rs.push(f_value(cal_x));
                cal_x = cal_rs[1] - cal_rs[2];
                cal_rs.push(f_value(cal_x));

                $('#cal_rs_1').text(cal_rs[0]);
                $('#cal_rs_2').text("$"+nftd.format(cal_rs[1]));
                $('#cal_rs_3').text("$"+nftd.format(cal_rs[2]));
                $('#cal_rs_4').text(nftd.format(cal_rs[3]));
                $('#cal_rs_5').text("$"+nftd.format(cal_rs[4]));
            }

            function f_value(cal_v) {
                return isFinite(cal_v) ? cal_val : 0;
            }
        });
    </script>
</div>
</body>
</html>