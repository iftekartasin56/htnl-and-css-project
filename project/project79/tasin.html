<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Investment Calculator</title>
</head>

<body>

    <div id="wrapper">
        <br>
        <h1 class="ms--text-center">Mortgage Calculator</h1>
        <hr>
        <style>
            #wrapper {
                width: 1080px;
                margin: 0 auto;
            }

            #wrapper {
                font-family: Arial, Helvetica, sans-serif !important;
            }

            .ms--cal * {
                margin: 0;
                padding: 0;
            }

            .ms--cal h1,
            .ms--cal h2,
            .ms--cal h3,
            .ms--cal h4 {
                margin-bottom: 1rem;
            }

            .ms--row {
                display: flex;
                flex-wrap: wrap;
                margin-top: 0;
            }

            .ms--input-sec label {
                display: block;
                margin-bottom: 10px;
                font-size: 18px;
                font-weight: 600;
            }

            .ms--input-group {
                position: relative;
            }

            .ms--form-control {
                display: block;
                width: 100%;
                padding: .375rem .75rem .375rem 1.7rem;
                font-size: 1.5rem;
                font-weight: 400;
                line-height: 1.5;
                color: #212529;
                background-color: #fff;
                background-clip: padding-box;
                border: none;
                border-bottom: 5px solid #ced4da;
                -webkit-appearance: none;
                -moz-appearance: none;
                appearance: none;
                box-sizing: border-box;
                transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
            }

            .ms--form-control:hover {
                border-bottom: 5px solid #2A85AF;
            }

            .ms--form-control:focus {
                outline: none !important;
                border-bottom: 5px solid #2A85AF;
            }

            .ms--input-append {
                font-size: 1.5rem;
                font-weight: 400;
                line-height: 1.5;
                position: absolute;
                top: 39px;
                color: #4f4f4f;
            }

            .ms--cal-result {
                background: #000;
                color: #fff;
                padding: 2rem;
            }

            .ms--result-title {
                background: #2A85AF;
                padding: 10px;
            }

            .ms--cal-result h2 {
                font-size: 18px;
            }

            .ms--cal-result .ms--cal-value {
                color: #E3AC16;
                font-size: 35px;
            }

            .ms--bdr {
                width: 100%;
                height: 1px;
                background: #6f6f6f;
                margin-bottom: 20px;
                ;
            }

            .ms--col-md-6 {
                flex: 0 0 auto;
                width: 50%;
                box-sizing: border-box;
                padding: 8px;
            }

            .ms--col-md-4 {
                flex: 0 0 auto;
                width: 33.33%;
                box-sizing: border-box;
                padding: 8px;
            }

            .ms--col-md-12 {
                flex: 0 0 auto;
                width: 100%;
                box-sizing: border-box;
                padding: 8px;
            }

            .ms--mb-3 {
                margin-bottom: 1.5rem;
            }

            .ms--text-center {
                text-align: center;
            }

            @media (max-width: 768px) {
                .ms--col-md-6 {
                    width: 100%;
                }

                .ms--col-md-4 {
                    width: 100%;
                }
                #wrapper {
                width: 100%;
            }
            }
        </style>
        <div class="ms--cal">
            <div class="ms--row ms--input-sec">
                <div class="ms--col-md-6">
                    <div class="ms--input-group ms--mb-3">
                        <label class="ms--form-label">Amount of Loan</label>
                        <input type="text" class="ms--form-control nf-class">
                        <span class="ms--input-append">$</span>
                    </div>
                    <div class="ms--input-group ms--mb-3">
                        <label class="ms--form-label">Annual Interest Rate</label>
                        <input type="text" class="ms--form-control ir-per">
                        <span class="ms--input-append">%</span>
                    </div>
                    <div class="ms--input-group ms--mb-3">
                        <label class="ms--form-label">Length of Loan in Years</label>
                        <input type="text" class="ms--form-control nf-class">
                    </div>
                    <div class="ms--input-group ms--mb-3">
                        <label class="ms--form-label">Start Date</label>
                        <input type="date" class="ms--form-control" id="cal_in_date" style="font-family: inherit;">
                    </div>
                </div>
                <div class="ms--col-md-6">
                    <div class="ms--input-group ms--mb-3">
                        <label class="ms--form-label">Mortgage Only (Principal Only)</label>
                        <input type="text" class="ms--form-control nf-class" id="cal_in_5" readonly>
                        <span class="ms--input-append">$</span>
                    </div>
                    <div class="ms--input-group ms--mb-3">
                        <label class="ms--form-label">Private Mortgage Insurance <small>(Per Month)</small></label>
                        <input type="text" class="ms--form-control nf-class">
                        <span class="ms--input-append">$</span>
                    </div>
                    <div class="ms--input-group ms--mb-3">
                        <label class="ms--form-label">Property Taxes <small>(Per Month)</small></label>
                        <input type="text" class="ms--form-control nf-class">
                        <span class="ms--input-append">$</span>
                    </div>
                    <div class="ms--input-group ms--mb-3">
                        <label class="ms--form-label">Homeowner Insurance <small>(Per Month)</small></label>
                        <input type="text" class="ms--form-control nf-class">
                        <span class="ms--input-append">$</span>
                    </div>
                </div>
                <div class="ms--col-md-12">
                    <div class="ms--cal-result">
                        <h1 class="ms--text-center">Results</h1>
                        <div class="ms--bdr"></div>
                        <div class="ms--row">
                            <div class="ms--col-md-4 ms--text-center">
                                <h1 class="ms--cal-value" id="cal_rs_1">$0.00</h1>
                                <h2>PRINCIPAL</h2>
                                <div class="ms--bdr"></div>
                            </div>
                            <div class="ms--col-md-4 ms--text-center">
                                <h1 class="ms--cal-value" id="cal_rs_2">$0.00</h1>
                                <h2>INTEREST</h2>
                                <div class="ms--bdr"></div>
                            </div>
                            <div class="ms--col-md-4 ms--text-center">
                                <h1 class="ms--cal-value" id="cal_rs_3">--/--/----</h1>
                                <h2>PAYOFF DATE</h2>
                                <div class="ms--bdr"></div>
                            </div>
                            <div class="ms--col-md-12 ms--text-center">
                                <br>
                                <h1 class="ms--cal-value" id="cal_rs_4">$0.00</h1>
                                <h2>TOTAL MONTHLY PAYMENT</h2>
                                <div class="ms--bdr"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/autonumeric@4.5.4"></script>
        <script>
            jQuery(document).ready(function ($) {
                const numOptionCurrency = {
                    digitGroupSeparator: ',',
                    decimalCharacter: '.',
                    decimalCharacterAlternative: '.',
                    currencySymbol: '',
                    currencySymbolPlacement: AutoNumeric.options.currencySymbolPlacement.prefix,
                    decimalPlaces: 0,
                    minimumValue: 0
                };
                const numOptionPercent = {
                    digitGroupSeparator: ',',
                    decimalCharacter: '.',
                    decimalCharacterAlternative: '.',
                    currencySymbol: '',
                    currencySymbolPlacement: AutoNumeric.options.currencySymbolPlacement.suffix,
                    decimalPlaces: 0,
                    minimumValue: 0,
                    maximumValue: 100
                };


                new AutoNumeric('.ir-per', numOptionPercent);

                const anElement1 = AutoNumeric.multiple('.nf-class', numOptionCurrency);

                function removeComma(num) {
                    return Number(num.replace(/,/g, ""));
                }

                const nft = Intl.NumberFormat("en-US", {
                    minimumFractionDigits: 0,
                    maximumFractionDigits: 0
                });

                let cal_inputs, cal_rs, cal_in_5, pr, intr, total_pay;
                let start, off_date, next_date, date, vl;
                let cal_x, cal_y, cal_z, d, m, i, total_m;

                const nftd = Intl.NumberFormat('en-US', {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                });
                off_date = "--/--/----";


                $('.ms--form-control').on('keyup change', function () {
                    cal_inputs = [];
                    i = 0;
                    $('.ms--form-control').each(function () {
                        if (i === 3) {
                            vl = $(this).val();
                        } else {
                            vl = removeComma($(this).val());
                        }
                        cal_inputs.push(vl);
                        i++;
                    });
                    calculate_rs(cal_inputs);
                });

                function calculate_rs(cal_inputs) {
                    cal_rs = [];
                    pr = 0;
                    intr = 0;

                    cal_x = (cal_inputs[1] / 100) / 12;
                    cal_y = Math.pow((1 + (cal_inputs[1] / 100) / 12), cal_inputs[2] * 12);
                    cal_in_5 = cal_inputs[0] * (cal_x * cal_y) / (cal_y - 1);

                    if (isFinite(cal_in_5)) {
                        $('#cal_in_5').val(cal_in_5.toFixed(2));
                    }

                    cal_x = cal_in_5 + cal_inputs[5] + cal_inputs[6] + cal_inputs[7];
                    total_pay = cal_x;

                    let dt = cal_inputs[3];

                    if (isFirstDay(dt)) {
                        start = 1;
                    } else {
                        start = 0;
                    }

                    total_m = cal_inputs[2] * 12;
                    if (cal_inputs[3] !== "") {
                        for (i = 1; i <= total_m - start; i++) {
                            next_date = next_month_first_date(dt, i);
                        }
                        d = two_int(next_date.getDate());
                        m = two_int(next_date.getMonth() + 1);
                        off_date = m + "/" + d + "/" + next_date.getFullYear();
                    }

                    for (i = 1; i <= total_m; i++) {
                        if (i === 1) {
                            cal_x = cal_inputs[0] * (cal_inputs[1] / 100) / 12;
                            cal_x = (cal_x < 0) ? 0 : cal_x;
                            cal_y = (cal_inputs[0] < cal_in_5) ? cal_inputs[0] : (cal_in_5 - cal_x);
                            cal_z = cal_inputs[0] - cal_y;
                        } else {
                            cal_x = cal_z * (cal_inputs[1] / 100) / 12;
                            cal_x = (cal_x < 0) ? 0 : cal_x;
                            cal_y = (cal_z < cal_in_5) ? cal_z : (cal_in_5 - cal_x);
                            cal_z = cal_z - cal_y;
                        }
                        intr = intr + cal_x;
                        pr = pr + cal_y;
                    }

                    $('#cal_rs_1').text("$" + nftd.format(f_value(pr)));
                    $('#cal_rs_2').text("$" + nftd.format(f_value(intr)));
                    $('#cal_rs_3').text(off_date);
                    $('#cal_rs_4').text("$" + nftd.format(f_value(total_pay)));
                }

                function next_month_first_date(dt, m) {
                    date = new Date(dt);
                    date.setDate(1);
                    date.setMonth(date.getMonth() + m);
                    return date;
                }

                function isFirstDay(dt) {
                    var test = new Date(dt);
                    var month = test.getMonth();

                    test.setDate(test.getDate() - 1);
                    return test.getMonth() !== month;
                }

                function two_int(cal_v) {
                    let vl = cal_v;
                    if (cal_v < 10) {
                        vl = "0" + cal_v;
                    }
                    return vl;
                }

                function f_value(cal_v) {
                    let vl = 0;
                    if (isFinite(cal_v)) {
                        vl = cal_v;
                    }
                    return vl;
                }
            });
        </script>
    </div>
</body>

</html>