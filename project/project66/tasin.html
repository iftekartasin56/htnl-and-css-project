
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

    <title>Payment Calculator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
        }
    </style>
</head>

<body>
    <style>
        #mx_cl *,
        ::after,
        ::before {
            box-sizing: border-box;
        }

        #mx_cl {
            line-height: 1.5;
            font-family: inherit;
        }

        #mx_cl .container {
            width: 100%;
            padding-right: 15px;
            padding-left: 15px;
            margin-right: auto;
            margin-left: auto;
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: #4a4a4a;
            text-align: left;
        }

        #mx_cl label {
            display: inline-block;
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        #mx_cl .row {
            display: -ms-flexbox;
            display: flex;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap;
            margin-right: -15px;
            margin-left: -15px;
        }

        #mx_cl .col-md-1,
        #mx_cl .col-md-10,
        #mx_cl .col-md-11,
        #mx_cl .col-md-12,
        #mx_cl .col-md-2,
        #mx_cl .col-md-3,
        #mx_cl .col-md-4,
        #mx_cl .col-md-5,
        #mx_cl .col-md-6,
        #mx_cl .col-md-7,
        #mx_cl .col-md-8,
        #mx_cl .col-md-9 {
            position: relative;
            width: 100%;
            padding-right: 15px;
            padding-left: 15px;
        }

        #mx_cl .form-group {
            margin-bottom: 1rem;
        }

        #mx_cl .form-control {
            display: block;
            width: 100%;
            height: calc(1em + 0.75rem + 2px);
            padding: 0.275rem 0.75rem;
            font-size: 16px;
            font-weight: 400;
            line-height: 1.5;
            color: #4a4a4a;
            background-color: #fff;
            background-clip: padding-box;
            border: 1px solid #dddddd;
            transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
            border-radius: 5px;
        }

        #mx_cl .form-control:focus {
            outline: none;
        }

        #mx_cl .btn {
            display: inline-block;
            font-weight: 400;
            color: #212529;
            text-align: center;
            vertical-align: middle;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            background-color: transparent;
            border: 1px solid transparent;
            padding: .275rem .75rem;
            font-size: 1rem;
            line-height: 1.5;
            border-radius: .25rem;
            transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;
        }

        #mx_cl .button-sec {
            display: flex;
            gap: 10px;
        }


        #mx_cl .option-btn {
            color: #A7A7A7;
            background-color: #ffffff;
            border: 1px solid #D9D9D9;
            width: 50%;
        }

        #mx_cl .is-active {
            background-color: #E67E22;
            color: #fff;
            border: 1px solid #E67E22;
        }

        #mx_cl table {
            border-collapse: collapse;
        }

        #mx_cl .table {
            width: 100%;
            margin-bottom: 1rem;
            color: #212529;
        }

        #mx_cl .table td,
        #mx_cl .table th {
            padding: .75rem;
            vertical-align: top;
            border-top: 1px solid #dee2e6;
        }

        #mx_cl .text-center {
            text-align: center;
        }

        @media (min-width: 576px) {
            #mx_cl .container {
                max-width: 100%;
            }
        }

        @media (min-width: 768px) {
            #mx_cl .container {
                max-width: 100%;
            }

            #mx_cl .col-md-12 {
                -ms-flex: 0 0 100%;
                flex: 0 0 100%;
                max-width: 100%;
            }

            #mx_cl .col-md-9 {
                -ms-flex: 0 0 75%;
                flex: 0 0 75%;
                max-width: 75%;
            }

            #mx_cl .col-md-8 {
                -ms-flex: 0 0 66.666667%;
                flex: 0 0 66.666667%;
                max-width: 66.666667%;
            }

            #mx_cl .col-md-7 {
                -ms-flex: 0 0 58.33333%;
                flex: 0 0 58.33333%;
                max-width: 58.33333%;
            }

            #mx_cl .col-md-6 {
                -ms-flex: 0 0 50%;
                flex: 0 0 50%;
                max-width: 50%;
            }

            #mx_cl .col-md-5 {
                -ms-flex: 0 0 41.666667%;
                flex: 0 0 41.666667%;
                max-width: 41.666667%;
            }

            #mx_cl .col-md-4 {
                -ms-flex: 0 0 33.333333%;
                flex: 0 0 33.333333%;
                max-width: 33.333333%;
            }

            #mx_cl .col-md-3 {
                -ms-flex: 0 0 25%;
                flex: 0 0 25%;
                max-width: 25%;
            }
        }

        @media (min-width: 992px) {
            #mx_cl .container {
                max-width: 900px;
            }
        }

        @media (min-width: 1200px) {
            #mx_cl .container {
                max-width: 900px;
            }
        }

        #mx_cl .text-right {
            text-align: right;
        }

        #mx_cl .form-group,
        #mx_cl .input-group {
            position: relative;
            margin-bottom: 15px;
        }



        #mx_cl .top-title {
            font-size: 30px !important;
            text-align: center;
            font-weight: 600;
            font-size: 24px;
            background-color: #324354;
            color: #FFF;
            padding: 5px;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            margin: 0px;
        }

        #mx_cl .inner_context {
            padding: 30px;
            padding-top: 20px;
        }

        #mx_cl .em-input-group-text {
            margin-bottom: 0;
            position: absolute;
            padding-left: 9px;
            padding-top: 3.5px;
            font-size: 1rem;
        }

        #mx_cl .text-right {
            text-align: left;
            padding-left: 10px;
        }

        #mx_cl .footer-output {
            font-size: 36px;
            font-weight: 800;
        }

        #mx_cl .full-context {
            box-shadow: 0 0 10px #dadada;
            border-radius: 8px;
        }

        #mx_cl .head-p {
            text-align: center;
            margin-bottom: 20px;
        }

        #mx_cl .head-section {
            padding-bottom: 20px;
            border-bottom: 1px solid #324354;
        }

        #mx_cl .prepend-text {
            position: absolute;
            left: 7px;
            bottom: 3px;
            font-size: 16px;
        }
        #mx_cl .append-text {
            position: absolute;
            right: 7px;
            bottom: 3px;
            font-size: 16px;
        }

        #mx_cl .text-rightt {
            padding-left: 20px;
        }

        #mx_cl .mid-sectionn {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #mx_cl .option-btn {
            color: #A7A7A7;
            background-color: #ffffff;
            border: 1px solid #D9D9D9;

        }

        #mx_cl .is-active {
            background-color: #324354;
            color: #fff;
            border: 1px solid #324354;
        }

        #mx_cl .mid-section {
            margin-top: 30px;
        }

        #mx_cl .mid_one {
            padding-right: 20px;
        }

        #mx_cl .mid_two {
            padding-left: 20px;
        }

        #mx_cl .footer-sec {
            padding: 30px;
            color: #fff;
            background-color: #324354;
            border-radius: 8px;
            margin-top: 25px;

        }

        #mx_cl .left-footer-p {
            font-size: 18px;
            font-weight: 400;
            color: #fff;
            padding-bottom: 10px;
            border-bottom: 1px solid #FFF;
        }

        #mx_cl .result-sec {
            font-size: 18px;
            font-weight: 500;
            padding-bottom: 5px;
            border-bottom: 1px solid #FFF;
        }

        #mx_cl .final-output {
            font-size: 30px;
            font-weight: 600;
        }

        #mx_cl .email_button {
            background-color: #0D2131;
            width: 100%;
            color: #fff;
        }

        #mx_cl .footer-right {
            text-align: right;
        }

        #mx_cl .common-p {
            margin-top: 5px;
            margin-bottom: 5px;
        }
        #mx_cl .ds-none {
            display: none;
        }
        #mx_cl .err-input {
            border-color: red;
        }

        @media (max-width: 768px) {
            #mx_cl .inner_context {
                padding: 15px;
            }

            #mx_cl .footer-sec {
                padding: 15px;
                text-align: center;
            }
            #mx_cl .extra_margin{
                margin-bottom: 20px;
            }
            #mx_cl .container{
                padding: 0px;
            }

        }
    </style>
    <div class="ms-cl" id="mx_cl">
        <div class="container">
            <div class="full-context">
                <div class="row">
                    <div class="col-md-12">
                        <h3 class="top-title">Find your payment</h3>
                    </div>
                    <div class="col-md-12">
                        <div class="inner_context">
                            <div class="head-section">
                                <div class="row">
                                    <div class="col-md-4">
                                        <label for="in_fname" class="common-p">First Name <span style="color:red;">*</span></label>
                                        <div class="input-group">
                                            <input type="text" class="form-control cl-rq" id="in_fname" value="">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="in_lname" class="common-p">Last Name <span style="color:red;">*</span></label>
                                        <div class="input-group">
                                            <input type="text" class="form-control cl-rq" id="in_lname" value="">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="in_phone" class="common-p">Phone Number</label>
                                        <div class="input-group">
                                            <input type="text" class="form-control" id="in_phone" value="">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-8">
                                        <label for="in_state" class="common-p">State <span style="color:red;">*</span></label>
                                        <div class="input-group">
                                            <select class="form-select form-control cl-rq" id="in_state" name="in_state">
                                                <option value="AL">Alabama</option>
                                                <option value="AK">Alaska</option>
                                                <option value="AZ">Arizona</option>
                                                <option value="AR">Arkansas</option>
                                                <option value="CA">California</option>
                                                <option value="CO">Colorado</option>
                                                <option value="CT">Connecticut</option>
                                                <option value="DE">Delaware</option>
                                                <option value="DC">District of Columbia</option>
                                                <option value="FL">Florida</option>
                                                <option value="GA">Georgia</option>
                                                <option value="HI">Hawaii</option>
                                                <option value="ID">Idaho</option>
                                                <option value="IL">Illinois</option>
                                                <option value="IN">Indiana</option>
                                                <option value="IA">Iowa</option>
                                                <option value="KS">Kansas</option>
                                                <option value="KY">Kentucky</option>
                                                <option value="LA">Louisiana</option>
                                                <option value="ME">Maine</option>
                                                <option value="MD">Maryland</option>
                                                <option value="MA">Massachusetts</option>
                                                <option value="MI">Michigan</option>
                                                <option value="MN">Minnesota</option>
                                                <option value="MS">Mississippi</option>
                                                <option value="MO">Missouri</option>
                                                <option value="MT">Montana</option>
                                                <option value="NE">Nebraska</option>
                                                <option value="NV">Nevada</option>
                                                <option value="NH">New Hampshire</option>
                                                <option value="NJ">New Jersey</option>
                                                <option value="NM">New Mexico</option>
                                                <option value="NY">New York</option>
                                                <option value="NC">North Carolina</option>
                                                <option value="ND">North Dakota</option>
                                                <option value="OH">Ohio</option>
                                                <option value="OK">Oklahoma</option>
                                                <option value="OR">Oregon</option>
                                                <option value="PA">Pennsylvania</option>
                                                <option value="PR">Puerto Rican Municipio</option>
                                                <option value="RI">Rhode Island</option>
                                                <option value="SC">South Carolina</option>
                                                <option value="SD">South Dakota</option>
                                                <option value="TN">Tennessee</option>
                                                <option value="TX">Texas</option>
                                                <option value="UT">Utah</option>
                                                <option value="VT">Vermont</option>
                                                <option value="VA">Virginia</option>
                                                <option value="WA">Washington</option>
                                                <option value="WV">West Virginia</option>
                                                <option value="WI">Wisconsin</option>
                                                <option value="WY">Wyoming</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="in_zipcode" class="common-p">Zipcode <span style="color:red;">*</span></label>
                                        <div class="input-group">
                                            <input type="text" class="form-control cl-rq" id="in_zipcode" value="">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mid-section">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label for="in_1" class="common-p">Vehicle Price <span style="color:red;">*</span></label>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="input-group">
                                                    <span class="prepend-text">$</span>
                                                    <input type="text" class="form-control text-rightt cl-input in-cr cl-rq" id="in_1" value="25000">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="in_2" class="common-p">Down Payment</label>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="input-group">
                                                    <span class="prepend-text">$</span>
                                                    <input type="text" class="form-control text-rightt cl-input in-cr" id="in_2" value="0">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="in_3" class="common-p">Interest Rate <span style="color:red;">*</span></label>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="input-group">
                                                    <input type="text" class="form-control cl-input in-prcnt cl-rq" id="in_3" value="5.99">
                                                    <span class="append-text">%</span>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="in_4" class="common-p">Additional Dealer Fees</label>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="input-group">
                                                    <span class="prepend-text">$</span>
                                                    <input type="text" class="form-control text-rightt cl-input in-cr" id="in_4" value="0">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 ">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label for="in_5" class="common-p">Approximate weight</label>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="input-group">
                                                    <select class="form-select form-control" id="in_8">
                                                        <option value="2500" selected>2500 lbs</option>
                                                        <option value="3000">3000 lbs</option>
                                                        <option value="3500">3500 lbs</option>
                                                        <option value="4000">4000 lbs</option>
                                                        <option value="4500">4500 lbs</option>
                                                        <option value="5000">5000 lbs</option>
                                                        <option value="5500">5500 lbs</option>
                                                        <option value="6000">6000 lbs</option>
                                                        <option value="6500">6500 lbs</option>
                                                        <option value="7000">7000 lbs</option>
                                                        <option value="7500">7500 lbs</option>
                                                        <option value="8000">8000 lbs</option>
                                                        <option value="8500">8500 lbs</option>
                                                        <option value="9000">9000 lbs</option>
                                                        <option value="9500">9500 lbs</option>
                                                        <option value="10000">10000 lbs</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="in_5" class="common-p">Term</label>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="input-group">
                                                    <select class="form-select form-control" id="in_5">
                                                        <option value="12">12 Months</option>
                                                        <option value="24">24 Months</option>
                                                        <option value="36">36 Months</option>
                                                        <option value="48">48 Months</option>
                                                        <option value="60">60 Months</option>
                                                        <option value="72" selected>72 Months</option>
                                                        <option value="84">84 Months</option>
                                                        <option value="96">96 Months</option>
                                                        <option value="144">144 Months</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="common-p">Trade In?</label>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="input-group">
                                                    <div class="button-sec">
                                                        <button type="button" data-value="Yes" class="btn option-btn">YES</button>
                                                        <button type="button" data-value="No" class="btn option-btn is-active">NO</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6 con-trade ds-none">
                                                <label for="in_6" class="common-p">Trade-In Value</label>
                                            </div>
                                            <div class="col-md-6 con-trade ds-none">
                                                <div class="input-group">
                                                    <span class="prepend-text">$</span>
                                                    <input type="text" class="form-control text-rightt cl-input in-cr" id="in_6" value="">
                                                </div>
                                            </div>
                                            <div class="col-md-6 con-trade ds-none">
                                                <label for="in_7" class="common-p">Trade-In Payoff</label>
                                            </div>
                                            <div class="col-md-6 con-trade ds-none">
                                                <div class="input-group">
                                                    <span class="prepend-text">$</span>
                                                    <input type="text" class="form-control text-rightt cl-input in-cr" id="in_7" value="">
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="footer-sec">
                                <div class="row">
                                    <div class="col-md-7 extra_margin">
                                        <div class="result-sec">
                                            <span class="monthly_pay">Monthly Payment</span>
                                        </div>
                                        <div class="output-sec">
                                            <div class="final-output" id="rs_vl">$ 0.00</div>
                                        </div>
                                    </div>
                                    <div class="col-md-5 footer-right">
                                        <div class="input-group">
                                            <input type="text"
                                                class="form-control text-center cl-rq" id="in_email"
                                                value="" placeholder="Enter email here*">
                                        </div>
                                        <button type="button" class="btn email_button" id="form_submit_btn">Email Result</button>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/autonumeric@4.5.4"></script>
    <script>
        jQuery(($) => {
            let tradeIn = "No";
            let ins = {}, data_obj, data_arr = [];
            let txt_msg = ``;

            const numOptionCurrency = {
                digitGroupSeparator        : ',',
                decimalCharacter           : '.',
                decimalCharacterAlternative: '.',
                currencySymbol             : '',
                currencySymbolPlacement    : AutoNumeric.options.currencySymbolPlacement.prefix,
                decimalPlaces              : 0,
                minimumValue: 0
            };

            const numOptionPercent = {
                digitGroupSeparator        : ',',
                decimalCharacter           : '.',
                decimalCharacterAlternative: '.',
                currencySymbol             : '',
                currencySymbolPlacement    : AutoNumeric.options.currencySymbolPlacement.suffix,
                decimalPlaces              : 2,
                minimumValue: 0,
                maximumValue: 100
            };

            const anElement1 = AutoNumeric.multiple('.in-cr', numOptionCurrency);
            const anElement2 = AutoNumeric.multiple('.in-prcnt', numOptionPercent);

            const nft = Intl.NumberFormat("en-US", {
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            });

            var spreadsheetID = "1aYHWwoKei1Aa3plKTNIVVkzAbYJh0rr709G-8oANEgg";

            var tab_name = "Sheet1";
            var api_key = "AIzaSyAJLmQ6u_Fho0N2WDFJoiuwfypY-hLBNkg";
            var url = 'https://sheets.googleapis.com/v4/spreadsheets/' +
                spreadsheetID + '/values/' + tab_name +
            '?alt=json&key=' + api_key;
                
            $.getJSON(url, function(json)
            {
                let data = json.values;
                data_obj = data;
            });

            $(".option-btn").on("click", function(){
                tradeIn = $(this).data("value");
                $(".option-btn").removeClass("is-active");
                $(this).addClass("is-active");

                if(tradeIn == "Yes"){
                    $(".con-trade").removeClass("ds-none");
                } else {
                    $(".con-trade").addClass("ds-none");
                }
            });

            $("#in_state").on("change", function(){
                $("#in_zipcode").removeClass("err-input");
                $("#in_zipcode").val("");
                getData();
            });

            $(".cl-rq").on("input", function(){
                $(this).removeClass("err-input");
            });

            $("#in_zipcode").on("input", function(){
                $("#in_zipcode").removeClass("err-input");
            });

            $("#in_zipcode").on("change", function(){
                getData();
            });

            $(".cl-input").on("input", function(){
                calc();
            });
            
            $("#form_submit_btn").on("click", function(){
                let total_in = $(".cl-rq").length;
                let x = 0;

                $(".cl-rq").each(function(i, elm){
                    let vl = $(elm).val();
                    let inType = $(elm).attr("type");
                    
                    if(inType == "email"){
                        vl = validateEmailAdd(vl);
                    }

                    if(vl) {
                        $(elm).removeClass("err-input");
                        x++;
                    } else {
                        $(elm).addClass("err-input");
                    }
                });

                if(x == total_in){
                    in_fname = $("#in_fname").val();
                    in_lname = $("#in_lname").val();
                    in_email = $("#in_email").val();

                    $("#fname_id").val(in_fname);
                    $("#lname_id").val(in_lname);
                    $("#email_id").val(in_email);
                    $("#msg_id").val(txt_msg);
                    $("#btn_id").click();
                    console.log("success");
                }
            });

            function getData(){
                data_arr = [];

                in_state = $("#in_state").val();
                in_zipcode = $("#in_zipcode").val();

                if(in_state && in_zipcode){
                    Object.keys(data_obj).forEach(function(k){
                        let arr = data_obj[k];

                        if(arr[0] == in_zipcode && arr[2] == in_state){
                            data_arr = arr;
                        }
                    });
                    
                    if(data_arr.length){
                        $("#in_zipcode").removeClass("err-input");
                        calc();
                    } else {
                        $("#in_zipcode").addClass("err-input");
                    }
                }
            }

            function calc(){
                let Vehicle_Price = removeSign($("#in_1").val());
                let Money_Down = removeSign($("#in_2").val());
                let Interest_Rate = removeSign($("#in_3").val());
                let Fees = removeSign($("#in_4").val());
                let Term = removeSign($("#in_5").val());
                let Trade_In_Value = removeSign($("#in_6").val());
                let Trade_In_Payoff = removeSign($("#in_7").val());
                let Vehicle_weight_cost = removeSign($('#in_8').val());


                if(data_arr.length){
                    let Doc_Fee = Number(data_arr[9]);
                    let Title = Number(data_arr[10]);
                    let Registration_Rate = (data_arr.length > 13) ? Number(data_arr[13]) : 0;
                    let Registration_Lookup = (data_arr.length > 11) ? Number(data_arr[11]) : 0;
                    let Registration_Rate_Fee = (Registration_Rate * Vehicle_Price);
                    let Registration = Registration_Lookup + Registration_Rate_Fee;

                    let cost = 0;
                    if(in_state == "AR"){
                        if(Vehicle_weight_cost <= 3500){
                            cost = 17;
                        } else if(Vehicle_weight_cost > 3500 && Vehicle_weight_cost <= 4500){
                            cost = 25;
                        } else if(Vehicle_weight_cost > 4500){
                            cost = 30;
                        }
                    } else if(in_state == "DC"){
                        if(Vehicle_weight_cost <= 3500){
                            cost = 72;
                        } else if(Vehicle_weight_cost > 3500){
                            cost = 145;
                        }
                    } else if(in_state == "MD"){
                        if(Vehicle_weight_cost <= 3500){
                            cost = 135;
                        } else if(Vehicle_weight_cost > 3500){
                            cost = 187;
                        }
                    } else if(in_state == "NH"){
                        if(Vehicle_weight_cost <= 3500){
                            cost = 31.20;
                        } else if(Vehicle_weight_cost > 3500 && Vehicle_weight_cost <= 5000 ){
                            cost  = 43.20;
                        } else if(Vehicle_weight_cost > 5000){
                            cost = 55.20;
                        }
                    } else{
                        cost = 0;
                    }

                    let Total_State_Fees = Title + Registration + cost;
                    let Money_Factor = Interest_Rate/100;
                    let Total_Tax_RT = Number(data_arr[5]);

                    let State_Tax_Credit_AMT = 0;
                    let Trade_Credit = tradeIn;
                    
                    if(Trade_Credit =='Yes') {
                        State_Tax_Credit_AMT = Trade_In_Value * Total_Tax_RT;
                    }
                    let Flat_Tax = (data_arr.length > 12) ? Number(data_arr[12]) : 0;

                    let Taxes = Total_Tax_RT * ( Fees +   Doc_Fee + Vehicle_Price) + Flat_Tax - State_Tax_Credit_AMT; //

                    let Amt_Financed =  Vehicle_Price + Fees + Total_State_Fees + Taxes  +  Doc_Fee - Trade_In_Value + Trade_In_Payoff;
                    let After_Money_Down = Amt_Financed - Money_Down;

                    let monthly_payment = (( (After_Money_Down) *( (Money_Factor) /12 )*Math.pow((1+( Money_Factor /12)), Term)))/(Math.pow((1+(Money_Factor/12)), Term) -1);

                    $("#rs_vl").text("$"+nft.format(monthly_payment));

                    txt_msg = txt_msg + `
                    First Name: ${$("#in_fname").val()}
                    Last Name: ${$("#in_lname").val()}
                    Email: ${$("#in_email").val()}
                    Phone Number: ${$("#in_fname").val()}
                    State : ${$("#in_fname").val()}
                    Zipcode : ${$("#in_fname").val()}
                    
                    Vehicle Price : $${$("#in_1").val()}
                    Down Payment : $${$("#in_2").val()}
                    Interest Rate : ${$("#in_3").val()}%
                    Additional Dealer Fees : $${$("#in_4").val()}
                    Term : ${$("#in_5").val()} months
                    Trade In : ${tradeIn}
                    Trade-In Value : $${$("#in_6").val()}
                    Trade-In Payoff : $${$("#in_7").val()}

                    Monthly Payment: $${nft.format(monthly_payment)}
                    `;

                }
            }

            // Validate email input field
            function validateEmailAdd(email) {
                const re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                return re.test(email);
            }

            function removeSign(vl){
                return Number(vl.replace(/\$|,/g, ''));
            }
        });
    </script>
</body>

</html>